<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ë§¤ë¬¼ ì •ë³´ - íœ™</title>

    <!-- ê¸°ë³¸ OG (ì¹´ì¹´ì˜¤ í¬ë¡¤ëŸ¬ìš© - JS ë¯¸ì‹¤í–‰ í™˜ê²½) -->
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="íœ™ - ë§¤ë¬¼ì¹´ë“œ">
    <meta property="og:title" content="ë§¤ë¬¼ ì •ë³´ - íœ™">
    <meta property="og:description" content="ì¤‘ê°œì‚¬ê°€ ì§ì ‘ ë³´ë‚´ëŠ” ë§¤ë¬¼ ì¹´ë“œì˜ˆìš”. ëˆŒëŸ¬ì„œ í™•ì¸í•˜ì„¸ìš” ğŸ ">
    <meta property="og:image" content="https://kangmin79.github.io/hwik-web/og-image.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:url" content="https://kangmin79.github.io/hwik-web/property_view.html">

    <!-- ì¹´ì¹´ì˜¤í†¡ íŠ¹í™” -->
    <meta name="kakao:title" content="ë§¤ë¬¼ ì •ë³´ - íœ™">
    <meta name="kakao:description" content="ì¤‘ê°œì‚¬ê°€ ì§ì ‘ ë³´ë‚´ëŠ” ë§¤ë¬¼ ì¹´ë“œì˜ˆìš” ğŸ ">
    <meta name="description" content="ì¤‘ê°œì‚¬ê°€ ì§ì ‘ ë³´ë‚´ëŠ” ë§¤ë¬¼ ì¹´ë“œì˜ˆìš”. ëˆŒëŸ¬ì„œ í™•ì¸í•˜ì„¸ìš” ğŸ ">

    <!-- Supabase SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        

        /* ========== ì¤‘ê°œì‚¬ ì½”ë©˜íŠ¸ ========== */
        .agent-comment-box {
            margin: 16px 0;
            padding: 14px 16px;
            background: rgba(250, 204, 21, 0.07);
            border-left: 3px solid #facc15;
            border-radius: 0 12px 12px 0;
        }

        .agent-comment-who {
            font-size: 11px;
            font-weight: 600;
            color: #facc15;
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .agent-comment-text {
            font-size: 14px;
            color: #e2e8f0;
            line-height: 1.7;
            white-space: pre-wrap;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Noto Sans KR', sans-serif;
            background: #0a0a12;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        /* í—¤ë” */
        .page-header {
            padding: 16px 20px;
            text-align: center;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .logo {
            font-size: 24px;
            font-weight: 900;
            color: #facc15;
            text-decoration: none;
        }
        
        /* ë©”ì¸ ì»¨í…ì¸  */
        .main {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 24px 20px;
        }
        
        /* ì¹´ë“œ ì»¨í…Œì´ë„ˆ */
        .card-container {
            width: 100%;
            max-width: 340px;
            margin-bottom: 24px;
            touch-action: pan-y;
        }
        
        /* ========== v3 ì¹´ë“œ ìŠ¤íƒ€ì¼ ========== */
        .card {
            width: 100%;
            border-radius: 16px;
            overflow: hidden;
            user-select: none;
        }

        /* ========== íƒ€ì… A: ë¯¸ë‹ˆë©€ ë‹¤í¬ ========== */
        .card-a { background: #1a1a2e; }
        .card-a .card-header { padding: 12px 16px; display: flex; justify-content: space-between; align-items: center; }
        .card-a .badge { padding: 5px 12px; border-radius: 16px; font-size: 12px; font-weight: 700; }
        .card-a .area-badge { color: #888; font-size: 11px; }
        .card-a .body { padding: 16px; }
        .card-a .complex-name { font-size: 18px; font-weight: 700; color: #fff; margin-bottom: 3px; }
        .card-a .location { font-size: 12px; color: #666; margin-bottom: 14px; }
        .card-a .price { font-size: 26px; font-weight: 800; margin-bottom: 14px; }
        .card-a .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-bottom: 14px; }
        .card-a .info-grid.single { grid-template-columns: 1fr; }
        .card-a .info-item { background: rgba(255,255,255,0.05); padding: 8px; border-radius: 6px; }
        .card-a .info-label { font-size: 9px; color: #666; margin-bottom: 2px; }
        .card-a .info-value { font-size: 13px; color: #fff; font-weight: 600; }
        .card-a .features { display: flex; flex-wrap: wrap; gap: 5px; margin-bottom: 14px; }
        .card-a .feature-tag { padding: 4px 8px; border-radius: 10px; font-size: 10px; }
        .card-a .agent { background: rgba(255,255,255,0.03); padding: 12px; border-radius: 8px; display: flex; justify-content: space-between; align-items: center; }
        .card-a .agent-name { font-size: 13px; color: #fff; font-weight: 600; }
        .card-a .agent-phone { font-size: 12px; }

        /* A ìƒ‰ìƒ */
        .card-a.mint { border: 2px solid rgba(78,205,196,0.3); }
        .card-a.mint .card-header { background: rgba(78,205,196,0.15); }
        .card-a.mint .badge { background: #4ecdc4; color: #1a1a2e; }
        .card-a.mint .price { color: #4ecdc4; }
        .card-a.mint .feature-tag { background: rgba(78,205,196,0.1); color: #4ecdc4; }
        .card-a.mint .agent-phone { color: #4ecdc4; }

        .card-a.purple { border: 2px solid rgba(167,139,250,0.3); }
        .card-a.purple .card-header { background: rgba(167,139,250,0.15); }
        .card-a.purple .badge { background: #a78bfa; color: #1a1a2e; }
        .card-a.purple .price { color: #a78bfa; }
        .card-a.purple .feature-tag { background: rgba(167,139,250,0.1); color: #a78bfa; }
        .card-a.purple .agent-phone { color: #a78bfa; }

        .card-a.blue { border: 2px solid rgba(96,165,250,0.3); }
        .card-a.blue .card-header { background: rgba(96,165,250,0.15); }
        .card-a.blue .badge { background: #60a5fa; color: #1a1a2e; }
        .card-a.blue .price { color: #60a5fa; }
        .card-a.blue .feature-tag { background: rgba(96,165,250,0.1); color: #60a5fa; }
        .card-a.blue .agent-phone { color: #60a5fa; }

        .card-a.orange { border: 2px solid rgba(251,146,60,0.3); }
        .card-a.orange .card-header { background: rgba(251,146,60,0.15); }
        .card-a.orange .badge { background: #fb923c; color: #1a1a2e; }
        .card-a.orange .price { color: #fb923c; }
        .card-a.orange .feature-tag { background: rgba(251,146,60,0.1); color: #fb923c; }
        .card-a.orange .agent-phone { color: #fb923c; }

        .card-a.pink { border: 2px solid rgba(244,114,182,0.3); }
        .card-a.pink .card-header { background: rgba(244,114,182,0.15); }
        .card-a.pink .badge { background: #f472b6; color: #1a1a2e; }
        .card-a.pink .price { color: #f472b6; }
        .card-a.pink .feature-tag { background: rgba(244,114,182,0.1); color: #f472b6; }
        .card-a.pink .agent-phone { color: #f472b6; }

        .card-a.gold { border: 2px solid rgba(251,191,36,0.3); }
        .card-a.gold .card-header { background: rgba(251,191,36,0.15); }
        .card-a.gold .badge { background: #fbbf24; color: #1a1a2e; }
        .card-a.gold .price { color: #fbbf24; }
        .card-a.gold .feature-tag { background: rgba(251,191,36,0.1); color: #fbbf24; }
        .card-a.gold .agent-phone { color: #fbbf24; }

        /* ========== íƒ€ì… D: ë¼ì´íŠ¸ ëª¨ë“œ ========== */
        .card-d { background: #ffffff; box-shadow: 0 4px 20px rgba(0,0,0,0.12); }
        .card-d .card-header { padding: 12px 16px; display: flex; justify-content: space-between; align-items: center; }
        .card-d .badge { padding: 5px 12px; border-radius: 16px; font-size: 12px; font-weight: 700; color: #fff; }
        .card-d .area-badge { color: #666; font-size: 11px; }
        .card-d .body { padding: 16px; }
        .card-d .complex-name { font-size: 18px; font-weight: 700; color: #1a1a2e; margin-bottom: 3px; }
        .card-d .location { font-size: 12px; color: #888; margin-bottom: 14px; }
        .card-d .price { font-size: 26px; font-weight: 800; margin-bottom: 14px; }
        .card-d .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-bottom: 14px; }
        .card-d .info-grid.single { grid-template-columns: 1fr; }
        .card-d .info-item { background: #f5f5f7; padding: 8px; border-radius: 6px; }
        .card-d .info-label { font-size: 9px; color: #888; margin-bottom: 2px; }
        .card-d .info-value { font-size: 13px; color: #1a1a2e; font-weight: 600; }
        .card-d .features { display: flex; flex-wrap: wrap; gap: 5px; margin-bottom: 14px; }
        .card-d .feature-tag { padding: 4px 8px; border-radius: 10px; font-size: 10px; }
        .card-d .agent { background: #f5f5f7; padding: 12px; border-radius: 8px; display: flex; justify-content: space-between; align-items: center; }
        .card-d .agent-name { font-size: 13px; color: #1a1a2e; font-weight: 600; }
        .card-d .agent-phone { font-size: 12px; }

        .card-d.mint .card-header { background: #e8faf8; }
        .card-d.mint .badge { background: #4ecdc4; }
        .card-d.mint .price, .card-d.mint .agent-phone { color: #4ecdc4; }
        .card-d.mint .feature-tag { background: #e8faf8; color: #2a9d8f; }
        .card-d.purple .card-header { background: #f3f0ff; }
        .card-d.purple .badge { background: #a78bfa; }
        .card-d.purple .price, .card-d.purple .agent-phone { color: #a78bfa; }
        .card-d.purple .feature-tag { background: #f3f0ff; color: #7c3aed; }
        .card-d.blue .card-header { background: #eff6ff; }
        .card-d.blue .badge { background: #60a5fa; }
        .card-d.blue .price, .card-d.blue .agent-phone { color: #60a5fa; }
        .card-d.blue .feature-tag { background: #eff6ff; color: #3b82f6; }
        .card-d.orange .card-header { background: #fff7ed; }
        .card-d.orange .badge { background: #fb923c; }
        .card-d.orange .price, .card-d.orange .agent-phone { color: #fb923c; }
        .card-d.orange .feature-tag { background: #fff7ed; color: #ea580c; }
        .card-d.pink .card-header { background: #fdf2f8; }
        .card-d.pink .badge { background: #f472b6; }
        .card-d.pink .price, .card-d.pink .agent-phone { color: #f472b6; }
        .card-d.pink .feature-tag { background: #fdf2f8; color: #db2777; }
        .card-d.gold .card-header { background: #fefce8; }
        .card-d.gold .badge { background: #fbbf24; }
        .card-d.gold .price, .card-d.gold .agent-phone { color: #d97706; }
        .card-d.gold .feature-tag { background: #fefce8; color: #d97706; }

        /* ========== íƒ€ì… E: í’€ ê·¸ë¼ë°ì´ì…˜ ========== */
        .card-e { border-radius: 20px; padding: 20px; }
        .card-e .badge { display: inline-block; background: rgba(255,255,255,0.25); color: #fff; padding: 5px 12px; border-radius: 14px; font-size: 11px; font-weight: 700; margin-bottom: 12px; }
        .card-e .complex-name { font-size: 20px; font-weight: 700; color: #fff; margin-bottom: 4px; }
        .card-e .location { font-size: 12px; color: rgba(255,255,255,0.7); margin-bottom: 16px; }
        .card-e .price { font-size: 32px; font-weight: 800; color: #fff; margin-bottom: 16px; }
        .card-e .info-row { display: flex; gap: 16px; margin-bottom: 16px; }
        .card-e .info-row.single { justify-content: center; }
        .card-e .info-row.single .info-item { flex: 0 0 auto; min-width: 120px; }
        .card-e .info-item { flex: 1; background: rgba(255,255,255,0.15); padding: 10px; border-radius: 10px; text-align: center; }
        .card-e .info-value { font-size: 14px; color: #fff; font-weight: 600; }
        .card-e .info-label { font-size: 9px; color: rgba(255,255,255,0.7); margin-top: 2px; }
        .card-e .agent { background: rgba(0,0,0,0.2); padding: 12px; border-radius: 10px; display: flex; justify-content: space-between; align-items: center; }
        .card-e .agent-name { font-size: 13px; color: #fff; font-weight: 600; }
        .card-e .agent-phone { font-size: 13px; color: #fff; }

        .card-e.mint { background: linear-gradient(135deg, #4ecdc4 0%, #44a08d 100%); }
        .card-e.purple { background: linear-gradient(135deg, #a78bfa 0%, #7c3aed 100%); }
        .card-e.blue { background: linear-gradient(135deg, #60a5fa 0%, #3b82f6 100%); }
        .card-e.orange { background: linear-gradient(135deg, #fb923c 0%, #ea580c 100%); }
        .card-e.pink { background: linear-gradient(135deg, #f472b6 0%, #db2777 100%); }
        .card-e.gold { background: linear-gradient(135deg, #fbbf24 0%, #d97706 100%); }

        /* ========== íƒ€ì… F: ë„¤ì˜¨ í…Œë‘ë¦¬ ========== */
        .card-f { background: #0a0a12; border-radius: 20px; padding: 18px; }
        .card-f .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 14px; }
        .card-f .badge { padding: 5px 12px; border-radius: 14px; font-size: 11px; font-weight: 700; }
        .card-f .area-badge { font-size: 11px; }
        .card-f .complex-name { font-size: 18px; font-weight: 700; color: #fff; margin-bottom: 3px; }
        .card-f .location { font-size: 11px; color: #666; margin-bottom: 14px; }
        .card-f .price { font-size: 28px; font-weight: 800; margin-bottom: 14px; }
        .card-f .info-row { display: flex; gap: 12px; margin-bottom: 14px; }
        .card-f .info-row.single { justify-content: center; }
        .card-f .info-row.single .info-item { flex: 0 0 auto; min-width: 120px; }
        .card-f .info-item { flex: 1; border: 1px solid rgba(255,255,255,0.1); padding: 10px; border-radius: 8px; text-align: center; }
        .card-f .info-value { font-size: 14px; color: #fff; font-weight: 600; }
        .card-f .info-label { font-size: 9px; color: #666; margin-top: 2px; }
        .card-f .agent { border-top: 1px solid rgba(255,255,255,0.1); padding-top: 14px; display: flex; justify-content: space-between; align-items: center; }
        .card-f .agent-name { font-size: 13px; color: #888; }
        .card-f .agent-phone { font-size: 13px; font-weight: 600; }

        .card-f.mint { border: 3px solid #4ecdc4; box-shadow: 0 0 20px rgba(78,205,196,0.3); }
        .card-f.mint .badge { background: #4ecdc4; color: #0a0a12; }
        .card-f.mint .area-badge, .card-f.mint .price, .card-f.mint .agent-phone { color: #4ecdc4; }
        .card-f.purple { border: 3px solid #a78bfa; box-shadow: 0 0 20px rgba(167,139,250,0.3); }
        .card-f.purple .badge { background: #a78bfa; color: #0a0a12; }
        .card-f.purple .area-badge, .card-f.purple .price, .card-f.purple .agent-phone { color: #a78bfa; }
        .card-f.blue { border: 3px solid #60a5fa; box-shadow: 0 0 20px rgba(96,165,250,0.3); }
        .card-f.blue .badge { background: #60a5fa; color: #0a0a12; }
        .card-f.blue .area-badge, .card-f.blue .price, .card-f.blue .agent-phone { color: #60a5fa; }
        .card-f.orange { border: 3px solid #fb923c; box-shadow: 0 0 20px rgba(251,146,60,0.3); }
        .card-f.orange .badge { background: #fb923c; color: #0a0a12; }
        .card-f.orange .area-badge, .card-f.orange .price, .card-f.orange .agent-phone { color: #fb923c; }
        .card-f.pink { border: 3px solid #f472b6; box-shadow: 0 0 20px rgba(244,114,182,0.3); }
        .card-f.pink .badge { background: #f472b6; color: #0a0a12; }
        .card-f.pink .area-badge, .card-f.pink .price, .card-f.pink .agent-phone { color: #f472b6; }
        .card-f.gold { border: 3px solid #fbbf24; box-shadow: 0 0 20px rgba(251,191,36,0.3); }
        .card-f.gold .badge { background: #fbbf24; color: #0a0a12; }
        .card-f.gold .area-badge, .card-f.gold .price, .card-f.gold .agent-phone { color: #fbbf24; }

        /* ========== íƒ€ì… J: í…Œì´ë¸”í˜• ========== */
        .card-j { background: #1a1a2e; }
        .card-j .card-header { padding: 14px 16px; display: flex; justify-content: space-between; align-items: center; }
        .card-j .badge { padding: 5px 12px; border-radius: 14px; font-size: 11px; font-weight: 700; }
        .card-j .price { font-size: 22px; font-weight: 800; }
        .card-j .body { padding: 0 16px 16px; }
        .card-j .complex-name { font-size: 16px; font-weight: 700; color: #fff; margin-bottom: 2px; }
        .card-j .location { font-size: 11px; color: #666; margin-bottom: 12px; }
        .card-j table { width: 100%; border-collapse: collapse; margin-bottom: 12px; }
        .card-j td { padding: 8px 0; font-size: 12px; border-bottom: 1px solid rgba(255,255,255,0.05); }
        .card-j td:first-child { color: #666; width: 70px; }
        .card-j td:last-child { color: #fff; font-weight: 500; }
        .card-j .agent { padding-top: 12px; border-top: 1px solid rgba(255,255,255,0.1); display: flex; justify-content: space-between; font-size: 12px; }
        .card-j .agent-name { color: #888; }
        .card-j .agent-phone { font-weight: 600; }

        .card-j.mint { border-top: 3px solid #4ecdc4; }
        .card-j.mint .card-header { background: rgba(78,205,196,0.1); }
        .card-j.mint .badge { background: #4ecdc4; color: #1a1a2e; }
        .card-j.mint .price, .card-j.mint .agent-phone { color: #4ecdc4; }
        .card-j.purple { border-top: 3px solid #a78bfa; }
        .card-j.purple .card-header { background: rgba(167,139,250,0.1); }
        .card-j.purple .badge { background: #a78bfa; color: #1a1a2e; }
        .card-j.purple .price, .card-j.purple .agent-phone { color: #a78bfa; }
        .card-j.blue { border-top: 3px solid #60a5fa; }
        .card-j.blue .card-header { background: rgba(96,165,250,0.1); }
        .card-j.blue .badge { background: #60a5fa; color: #1a1a2e; }
        .card-j.blue .price, .card-j.blue .agent-phone { color: #60a5fa; }
        .card-j.orange { border-top: 3px solid #fb923c; }
        .card-j.orange .card-header { background: rgba(251,146,60,0.1); }
        .card-j.orange .badge { background: #fb923c; color: #1a1a2e; }
        .card-j.orange .price, .card-j.orange .agent-phone { color: #fb923c; }
        .card-j.pink { border-top: 3px solid #f472b6; }
        .card-j.pink .card-header { background: rgba(244,114,182,0.1); }
        .card-j.pink .badge { background: #f472b6; color: #1a1a2e; }
        .card-j.pink .price, .card-j.pink .agent-phone { color: #f472b6; }
        .card-j.gold { border-top: 3px solid #fbbf24; }
        .card-j.gold .card-header { background: rgba(251,191,36,0.1); }
        .card-j.gold .badge { background: #fbbf24; color: #1a1a2e; }
        .card-j.gold .price, .card-j.gold .agent-phone { color: #fbbf24; }

        /* ì•¡ì…˜ ë²„íŠ¼ */
        .actions {
            width: 100%;
            max-width: 340px;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .action-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 16px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.2s;
            border: none;
            cursor: pointer;
        }
        
        .action-btn.primary {
            background: #4ecdc4;
            color: #0a0a12;
        }
        
        .action-btn.primary:hover {
            background: #3dbdb5;
        }
        
        .action-btn.secondary {
            background: rgba(255,255,255,0.1);
            color: #fff;
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .action-btn.secondary:hover {
            background: rgba(255,255,255,0.15);
        }
        
        .action-btn .icon {
            font-size: 20px;
        }
        
        /* í‘¸í„° */
        .footer {
            padding: 20px;
            text-align: center;
            color: #666;
            font-size: 12px;
        }
        
        .footer a {
            color: #facc15;
            text-decoration: none;
        }
    </style>
</head>
<body>
    <!-- í—¤ë” -->
    <header class="page-header">
        <a href="#" class="logo">íœ™</a>
    </header>
    
    <!-- ë©”ì¸ -->
    <main class="main">
        <!-- ì¹´ë“œ ì»¨í…Œì´ë„ˆ -->
        <div class="card-container" id="cardContainer">
            <!-- ì¹´ë“œê°€ ì—¬ê¸°ì— ë Œë”ë§ë¨ -->
        </div>
        
        <!-- ì•¡ì…˜ ë²„íŠ¼ -->
        <div class="actions">
            <a href="tel:010-1234-5678" class="action-btn primary" id="callBtn">
                <span class="icon">ğŸ“</span>
                ì „í™”í•˜ê¸°
            </a>
            <a href="sms:010-1234-5678" class="action-btn secondary" id="smsBtn">
                <span class="icon">ğŸ’¬</span>
                ë¬¸ìí•˜ê¸°
            </a>
        </div>
    </main>
    
    <!-- í‘¸í„° -->
    <footer class="footer">
        <a href="https://kangmin79.github.io/hwik-web/" style="display: inline-flex; align-items: center; gap: 6px; color: #facc15; text-decoration: none; font-size: 13px;">
            <span style="font-weight: 700;">íœ™</span>ìœ¼ë¡œ ë§Œë“  ë§¤ë¬¼ì¹´ë“œ Â· ë‚˜ë„ ì¨ë³´ê¸° â†’
        </a>
    </footer>
    
    <script>
        // Supabase ì´ˆê¸°í™”
        const SUPABASE_URL = 'https://jqaxejgzkchxbfzgzyzi.supabase.co';
        const SUPABASE_KEY = 'sb_publishable_A6eDGlqSejIZDsi1O6XrLg_fOK6yOBN';
        const supabaseClient = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
        
        // ì—¬ëŸ¬ ì¹´ë“œ ìƒíƒœ
        let allCardsData = [];
        let currentIndex = 0;
        
        // ìŠ¤ì™€ì´í”„ ìƒíƒœ
        let isDragging = false;
        let startX = 0;
        let currentX = 0;
        let cardElement = null;
        
        // ë¡œë”© ìƒíƒœ í‘œì‹œ
        function showLoading() {
            document.getElementById('cardContainer').innerHTML = `
                <div style="text-align: center; padding: 40px; color: #888;">
                    <div style="font-size: 24px; margin-bottom: 10px;">â³</div>
                    <div>ë§¤ë¬¼ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
                </div>
            `;
        }
        
        // ì—ëŸ¬ í‘œì‹œ
        function showError(message, emoji = 'âŒ') {
            document.getElementById('cardContainer').innerHTML = `
                <div style="text-align: center; padding: 40px; color: #888;">
                    <div style="font-size: 40px; margin-bottom: 16px;">${emoji}</div>
                    <div style="font-size: 15px; line-height: 1.6;">${message}</div>
                </div>
            `;
            // ë²„íŠ¼ ìˆ¨ê¸°ê¸° (ì˜¬ë°”ë¥¸ í´ë˜ìŠ¤ëª…)
            const actionsEl = document.querySelector('.actions');
            if (actionsEl) actionsEl.style.display = 'none';
        }
        
        // 7ì¼ ë§Œë£Œ ì²´í¬
        function isExpired(createdAt) {
            if (!createdAt) return false;
            const created = new Date(createdAt);
            const now = new Date();
            const diffDays = (now - created) / (1000 * 60 * 60 * 24);
            return diffDays > 7;
        }
        
        // ì¹´ë“œ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°
        async function loadCard(cardId) {
            showLoading();
            
            try {
                const { data, error } = await supabaseClient
                    .from('cards')
                    .select('*')
                    .eq('id', cardId)
                    .single();
                
                if (error) {
                    throw error;
                }
                
                if (!data) {
                    showError('ë§¤ë¬¼ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                    return;
                }
                
                // 7ì¼ ë§Œë£Œ ì²´í¬
                if (isExpired(data.created_at)) {
                    showError('ì´ ë§í¬ëŠ” ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤.<br><br>ê³µì¸ì¤‘ê°œì‚¬ì—ê²Œ ìƒˆ ë§í¬ë¥¼ ìš”ì²­í•´ ì£¼ì„¸ìš”.', 'â°');
                    return;
                }
                
                // ì¡°íšŒìˆ˜ ì¦ê°€ (ì„ íƒì‚¬í•­)
                supabaseClient.from('cards').update({ view_count: (data.view_count || 0) + 1 }).eq('id', cardId);
                
                // ì¹´ë“œ ë Œë”ë§
                renderCard(data);
                
            } catch (error) {
                console.error('ì¹´ë“œ ë¡œë”© ì˜¤ë¥˜:', error);
                showError('ë§¤ë¬¼ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
            }
        }
        
        // OG íƒœê·¸ ë™ì  ì—…ë°ì´íŠ¸
        function updateOGTags(data) {
            const p = data.property || {};
            const agent = data.agent || {};
            const name = p.complex || p.location || 'ë§¤ë¬¼';
            const type = p.type || '';
            const price = p.price || '';
            const area = p.area ? ` Â· ${p.area}` : '';
            const agentName = agent.business_name || agent.name || 'ì¤‘ê°œì‚¬';

            const title = `${type} ${price} Â· ${name}${area}`;
            const desc = `${agentName}ì´ ë³´ë‚´ëŠ” ë§¤ë¬¼ì´ì—ìš”. ì§€ê¸ˆ í™•ì¸í•´ë³´ì„¸ìš” ğŸ `;

            document.title = title;
            setMeta('og:title', title);
            setMeta('og:description', desc);
            setMeta('description', desc);
            setMeta('og:url', window.location.href);
        }

        function updateOGTagsMulti(cards) {
            if (!cards.length) return;
            const agent = cards[0].agent || {};
            const agentName = agent.business_name || agent.name || 'ì¤‘ê°œì‚¬';
            const count = cards.length;
            const first = cards[0].property || {};
            const firstName = first.complex || first.location || 'ë§¤ë¬¼';

            const title = `${agentName}ì˜ ë§¤ë¬¼ ${count}ê°œ Â· ${firstName} ì™¸`;
            const desc = `${count}ê°œ ë§¤ë¬¼ì„ ë¬¶ì–´ì„œ ë³´ë‚´ë“œë ¤ìš”. ëˆŒëŸ¬ì„œ í™•ì¸í•˜ì„¸ìš” ğŸ `;

            document.title = title;
            setMeta('og:title', title);
            setMeta('og:description', desc);
            setMeta('description', desc);
            setMeta('og:url', window.location.href);
        }

        function setMeta(name, content) {
            const isProp = name.startsWith('og:') || name.startsWith('kakao:');
            const attr = isProp ? 'property' : 'name';
            let el = document.querySelector(`meta[${attr}="${name}"]`);
            if (!el) {
                el = document.createElement('meta');
                el.setAttribute(attr, name);
                document.head.appendChild(el);
            }
            el.setAttribute('content', content);
        }

        // ì¹´ë“œ ë Œë”ë§
        function renderCard(data) {
            const container = document.getElementById('cardContainer');
            const { style, color, property, agent } = data;
            const p = property;
            
            const type = p.type || 'ì „ì„¸';
            const price = p.price || '-';
            const name = p.complex || p.location || '-';
            const location = p.complex ? (p.location || '') : '';
            const area = p.area || '';
            const floor = p.floor || '';

            // OG ë™ì  ì—…ë°ì´íŠ¸ (JS ì‹¤í–‰ í™˜ê²½ì—ì„œ)
            updateOGTags(data);
            const room = p.room || '';
            const features = p.features || [];
            const agentName = agent?.name || 'ë¶€ë™ì‚°';
            const agentPhone = agent?.phone || '';
            
            let html = '';
            
            if (style === 'a') {
                const infoItems = [];
                if (floor) infoItems.push(`<div class="info-item"><div class="info-label">ì¸µìˆ˜</div><div class="info-value">${floor}</div></div>`);
                if (room) infoItems.push(`<div class="info-item"><div class="info-label">êµ¬ì¡°</div><div class="info-value">${room}</div></div>`);
                const gridClass = infoItems.length === 1 ? 'info-grid single' : 'info-grid';
                
                html = `
                    <div class="card card-a ${color}">
                        <div class="card-header">
                            <span class="badge">${type}</span>
                            <span class="area-badge">${area}</span>
                        </div>
                        <div class="body">
                            <div class="complex-name">${name}</div>
                            ${location ? `<div class="location">${location}</div>` : ''}
                            <div class="price">${price}</div>
                            ${infoItems.length ? `<div class="${gridClass}">${infoItems.join('')}</div>` : ''}
                            ${features.length ? `<div class="features">${features.map(f => `<span class="feature-tag">${f}</span>`).join('')}</div>` : ''}
                            <div class="agent">
                                <span class="agent-name">${agentName}</span>
                                <span class="agent-phone">${agentPhone}</span>
                            </div>
                        </div>
                    </div>
                `;
            } else if (style === 'd') {
                const infoItemsD = [];
                if (floor) infoItemsD.push(`<div class="info-item"><div class="info-label">ì¸µìˆ˜</div><div class="info-value">${floor}</div></div>`);
                if (room) infoItemsD.push(`<div class="info-item"><div class="info-label">êµ¬ì¡°</div><div class="info-value">${room}</div></div>`);
                const gridClassD = infoItemsD.length === 1 ? 'info-grid single' : 'info-grid';
                
                html = `
                    <div class="card card-d ${color}">
                        <div class="card-header">
                            <span class="badge">${type}</span>
                            <span class="area-badge">${area}</span>
                        </div>
                        <div class="body">
                            <div class="complex-name">${name}</div>
                            ${location ? `<div class="location">${location}</div>` : ''}
                            <div class="price">${price}</div>
                            ${infoItemsD.length ? `<div class="${gridClassD}">${infoItemsD.join('')}</div>` : ''}
                            ${features.length ? `<div class="features">${features.map(f => `<span class="feature-tag">${f}</span>`).join('')}</div>` : ''}
                            <div class="agent">
                                <span class="agent-name">${agentName}</span>
                                <span class="agent-phone">${agentPhone}</span>
                            </div>
                        </div>
                    </div>
                `;
            } else if (style === 'e') {
                const infoItemsE = [];
                if (area) infoItemsE.push(`<div class="info-item"><div class="info-value">${area}</div><div class="info-label">ë©´ì </div></div>`);
                if (floor) infoItemsE.push(`<div class="info-item"><div class="info-value">${floor}</div><div class="info-label">ì¸µìˆ˜</div></div>`);
                const rowClassE = infoItemsE.length === 1 ? 'info-row single' : 'info-row';
                
                html = `
                    <div class="card card-e ${color}">
                        <span class="badge">${type}</span>
                        <div class="complex-name">${name}</div>
                        ${location ? `<div class="location">${location}</div>` : ''}
                        <div class="price">${price}</div>
                        ${infoItemsE.length ? `<div class="${rowClassE}">${infoItemsE.join('')}</div>` : ''}
                        <div class="agent">
                            <span class="agent-name">${agentName}</span>
                            <span class="agent-phone">${agentPhone}</span>
                        </div>
                    </div>
                `;
            } else if (style === 'f') {
                const infoItemsF = [];
                if (floor) infoItemsF.push(`<div class="info-item"><div class="info-value">${floor}</div><div class="info-label">ì¸µìˆ˜</div></div>`);
                if (room) infoItemsF.push(`<div class="info-item"><div class="info-value">${room}</div><div class="info-label">êµ¬ì¡°</div></div>`);
                const rowClassF = infoItemsF.length === 1 ? 'info-row single' : 'info-row';
                
                html = `
                    <div class="card card-f ${color}">
                        <div class="card-header">
                            <span class="badge">${type}</span>
                            <span class="area-badge">${area}</span>
                        </div>
                        <div class="complex-name">${name}</div>
                        ${location ? `<div class="location">${location}</div>` : ''}
                        <div class="price">${price}</div>
                        ${infoItemsF.length ? `<div class="${rowClassF}">${infoItemsF.join('')}</div>` : ''}
                        <div class="agent">
                            <span class="agent-name">${agentName}</span>
                            <span class="agent-phone">${agentPhone}</span>
                        </div>
                    </div>
                `;
            } else if (style === 'j') {
                html = `
                    <div class="card card-j ${color}">
                        <div class="card-header">
                            <span class="badge">${type}</span>
                            <span class="price">${price}</span>
                        </div>
                        <div class="body">
                            <div class="complex-name">${name}</div>
                            ${location ? `<div class="location">${location}</div>` : ''}
                            <table>
                                ${area ? `<tr><td>ë©´ì </td><td>${area}</td></tr>` : ''}
                                ${floor ? `<tr><td>ì¸µìˆ˜</td><td>${floor}</td></tr>` : ''}
                                ${room ? `<tr><td>êµ¬ì¡°</td><td>${room}</td></tr>` : ''}
                                ${features.length ? `<tr><td>íŠ¹ì§•</td><td>${features.join(', ')}</td></tr>` : ''}
                            </table>
                            <div class="agent">
                                <span class="agent-name">${agentName}</span>
                                <span class="agent-phone">${agentPhone}</span>
                            </div>
                        </div>
                    </div>
                `;
            }
            
            // ì¤‘ê°œì‚¬ ì½”ë©˜íŠ¸ ì¶”ê°€
            const agentComment = data.agent_comment;
            if (agentComment) {
                const agentName = agent?.name || 'ì¤‘ê°œì‚¬';
                html += `
                    <div class="agent-comment-box">
                        <div class="agent-comment-who">ğŸ’¬ ${agentName}ì˜ í•œë§ˆë””</div>
                        <div class="agent-comment-text">${agentComment.replace(/</g,'&lt;').replace(/>/g,'&gt;')}</div>
                    </div>
                `;
            }

            container.innerHTML = html;
            
            // ì „í™”ë²ˆí˜¸ ë²„íŠ¼ ì—…ë°ì´íŠ¸
            if (agentPhone) {
                document.getElementById('callBtn').href = `tel:${agentPhone.replace(/-/g, '')}`;
                document.getElementById('smsBtn').href = `sms:${agentPhone.replace(/-/g, '')}`;
            }
            
            // ë„¤ë¹„ê²Œì´ì…˜ í‘œì‹œ + ìŠ¤ì™€ì´í”„ ì„¤ì •
            updateNavigation();
            setupSwipe();
        }
        
        // ì—¬ëŸ¬ ì¹´ë“œ ë¡œë“œ
        async function loadMultipleCards(cardIds) {
            showLoading();
            
            try {
                const { data, error } = await supabaseClient
                    .from('cards')
                    .select('*')
                    .in('id', cardIds);
                
                if (error) throw error;
                
                if (!data || data.length === 0) {
                    showError('ë§¤ë¬¼ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                    return;
                }
                
                // ì›ë˜ ìˆœì„œ ìœ ì§€ + ë§Œë£Œ í•„í„°ë§
                allCardsData = cardIds.map(id => data.find(d => d.id === id)).filter(Boolean);
                
                // ë§Œë£Œëœ ì¹´ë“œ ì œê±°
                const validCards = allCardsData.filter(d => !isExpired(d.created_at));
                const expiredCount = allCardsData.length - validCards.length;
                allCardsData = validCards;
                
                if (allCardsData.length === 0) {
                    showError('ì´ ë§í¬ëŠ” ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤.<br><br>ê³µì¸ì¤‘ê°œì‚¬ì—ê²Œ ìƒˆ ë§í¬ë¥¼ ìš”ì²­í•´ ì£¼ì„¸ìš”.', 'â°');
                    return;
                }
                currentIndex = 0;
                
                if (allCardsData.length > 0) {
                    renderCard(allCardsData[0]);
                    if (allCardsData.length > 1) {
                        updateOGTagsMulti(allCardsData);
                    }
                }
                
            } catch (error) {
                console.error('ì¹´ë“œ ë¡œë”© ì˜¤ë¥˜:', error);
                showError('ë§¤ë¬¼ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
            }
        }
        
        // ë„¤ë¹„ê²Œì´ì…˜ ì—…ë°ì´íŠ¸
        function updateNavigation() {
            // ê¸°ì¡´ ë„¤ë¹„ê²Œì´ì…˜ ì œê±°
            const existingNav = document.getElementById('cardNav');
            if (existingNav) existingNav.remove();
            
            // ì¹´ë“œê°€ 1ê°œë©´ ë„¤ë¹„ê²Œì´ì…˜ í•„ìš” ì—†ìŒ
            if (allCardsData.length <= 1) return;
            
            // ë„¤ë¹„ê²Œì´ì…˜ ìƒì„±
            const nav = document.createElement('div');
            nav.id = 'cardNav';
            nav.style.cssText = 'display: flex; align-items: center; justify-content: center; gap: 12px; margin-bottom: 16px;';
            
            // ì¸ë””ì¼€ì´í„° (1 / 3)
            const indicator = document.createElement('div');
            indicator.id = 'cardIndicator';
            indicator.style.cssText = 'font-size: 14px; color: #888;';
            indicator.innerHTML = `<span style="color: #fff; font-weight: 600;">${currentIndex + 1}</span> / ${allCardsData.length}`;
            
            nav.appendChild(indicator);
            
            // ë„íŠ¸ ì¸ë””ì¼€ì´í„°
            const dots = document.createElement('div');
            dots.id = 'cardDots';
            dots.style.cssText = 'display: flex; gap: 6px; margin-left: 12px;';
            
            for (let i = 0; i < allCardsData.length; i++) {
                const dot = document.createElement('div');
                dot.style.cssText = `width: 8px; height: 8px; border-radius: 50%; background: ${i === currentIndex ? '#facc15' : 'rgba(255,255,255,0.2)'}; transition: background 0.2s;`;
                dot.dataset.index = i;
                dot.onclick = () => goToCard(i);
                dots.appendChild(dot);
            }
            
            nav.appendChild(dots);
            
            // ì¹´ë“œ ì»¨í…Œì´ë„ˆ ì•ì— ì‚½ì…
            const container = document.getElementById('cardContainer');
            container.parentNode.insertBefore(nav, container);
        }
        
        // ì¸ë””ì¼€ì´í„° ì—…ë°ì´íŠ¸
        function updateIndicator() {
            const indicator = document.getElementById('cardIndicator');
            if (indicator) {
                indicator.innerHTML = `<span style="color: #fff; font-weight: 600;">${currentIndex + 1}</span> / ${allCardsData.length}`;
            }
            
            const dots = document.querySelectorAll('#cardDots div');
            dots.forEach((dot, i) => {
                dot.style.background = i === currentIndex ? '#facc15' : 'rgba(255,255,255,0.2)';
            });
        }
        
        // ì¹´ë“œ ì´ë™
        function goToCard(index) {
            if (index < 0 || index >= allCardsData.length) return;
            currentIndex = index;
            renderCard(allCardsData[currentIndex]);
        }
        
        // ìŠ¤ì™€ì´í”„ ì„¤ì •
        function setupSwipe() {
            if (allCardsData.length <= 1) return;
            
            const container = document.getElementById('cardContainer');
            cardElement = container.querySelector('.card');
            if (!cardElement) return;
            
            // í„°ì¹˜ ì´ë²¤íŠ¸
            cardElement.addEventListener('touchstart', onDragStart, { passive: true });
            cardElement.addEventListener('touchmove', onDragMove, { passive: true });
            cardElement.addEventListener('touchend', onDragEnd);
            
            // ë§ˆìš°ìŠ¤ ì´ë²¤íŠ¸
            cardElement.addEventListener('mousedown', onDragStart);
            cardElement.addEventListener('mousemove', onDragMove);
            cardElement.addEventListener('mouseup', onDragEnd);
            cardElement.addEventListener('mouseleave', onDragEnd);
            
            cardElement.style.cursor = 'grab';
        }
        
        function onDragStart(e) {
            if (allCardsData.length <= 1) return;
            isDragging = true;
            startX = e.touches ? e.touches[0].clientX : e.clientX;
            currentX = 0;
            
            if (cardElement) {
                cardElement.style.transition = 'none';
                cardElement.style.cursor = 'grabbing';
            }
        }
        
        function onDragMove(e) {
            if (!isDragging || !cardElement) return;
            
            const x = e.touches ? e.touches[0].clientX : e.clientX;
            currentX = x - startX;
            
            // ì¹´ë“œ ë”°ë¼ì˜¤ê²Œ
            cardElement.style.transform = `translateX(${currentX}px)`;
            cardElement.style.opacity = 1 - Math.abs(currentX) / 500;
        }
        
        function onDragEnd() {
            if (!isDragging || !cardElement) return;
            isDragging = false;
            
            cardElement.style.transition = 'transform 0.3s ease, opacity 0.3s ease';
            cardElement.style.cursor = 'grab';
            
            const threshold = 80; // 80px ì´ìƒ ìŠ¤ì™€ì´í”„í•˜ë©´ ì´ë™
            
            if (currentX < -threshold && currentIndex < allCardsData.length - 1) {
                // ì™¼ìª½ìœ¼ë¡œ â†’ ë‹¤ìŒ ì¹´ë“œ
                cardElement.style.transform = 'translateX(-100%)';
                cardElement.style.opacity = '0';
                setTimeout(() => goToCard(currentIndex + 1), 200);
            } else if (currentX > threshold && currentIndex > 0) {
                // ì˜¤ë¥¸ìª½ìœ¼ë¡œ â†’ ì´ì „ ì¹´ë“œ
                cardElement.style.transform = 'translateX(100%)';
                cardElement.style.opacity = '0';
                setTimeout(() => goToCard(currentIndex - 1), 200);
            } else {
                // ì›ìœ„ì¹˜
                cardElement.style.transform = 'translateX(0)';
                cardElement.style.opacity = '1';
            }
            
            currentX = 0;
        }
        
        // URLì—ì„œ ì¹´ë“œ ID ê°€ì ¸ì˜¤ê¸°
        const urlParams = new URLSearchParams(window.location.search);
        const cardId = urlParams.get('id');
        const cardIds = urlParams.get('ids');
        
        if (cardIds) {
            // ì—¬ëŸ¬ ì¹´ë“œ (ë¬¶ìŒ)
            const ids = cardIds.split(',').filter(id => id.trim());
            if (ids.length > 0) {
                loadMultipleCards(ids);
            } else {
                showError('ì˜ëª»ëœ ë§í¬ì…ë‹ˆë‹¤.');
            }
        } else if (cardId) {
            // ë‹¨ì¼ ì¹´ë“œ
            allCardsData = []; // ë‹¨ì¼ ëª¨ë“œ
            loadCard(cardId);
        } else {
            // ID ì—†ìœ¼ë©´ ì—ëŸ¬ í‘œì‹œ
            showError('ì˜ëª»ëœ ë§í¬ì…ë‹ˆë‹¤.');
        }
    </script>
</body>
</html>
